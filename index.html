<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sales Summary</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
  <div class="container my-4">
    <h1 class="mb-4">Sales Summary</h1>
    <div class="mb-3">
      <h4>Total Sales: <span id="total-sales">Loading...</span></h4>
    </div>
    <table class="table table-striped" id="sales-table">
      <thead>
        <tr>
          <th>Item</th>
          <th>Sales</th>
        </tr>
      </thead>
      <tbody>
        <!-- Data will be inserted here -->
      </tbody>
    </table>
  </div>
  <script>
    // Function to fetch and process CSV data
    async function loadSalesData() {
      try {
        const response = await fetch('data.csv');
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        const csvText = await response.text();
        parseAndDisplay(csvText);
      } catch (error) {
        document.getElementById('total-sales').textContent = 'Error loading data';
        console.error('Error fetching data:', error);
      }
    }

    // Function to parse CSV and update DOM
    function parseAndDisplay(csvText) {
      const lines = csvText.trim().split('\n');
      let totalSales = 0;
      const tbody = document.querySelector('#sales-table tbody');

      lines.forEach(line => {
        const [item, salesStr] = line.split(',');
        const sales = parseFloat(salesStr);
        if (isNaN(sales)) return; // skip invalid data
        totalSales += sales;

        const row = document.createElement('tr');

        const itemCell = document.createElement('td');
        itemCell.textContent = item;
        row.appendChild(itemCell);

        const salesCell = document.createElement('td');
        salesCell.textContent = sales.toFixed(2);
        row.appendChild(salesCell);

        tbody.appendChild(row);
      });

      document.getElementById('total-sales').textContent = totalSales.toFixed(2);
    }

    // Load data on page load
    window.addEventListener('DOMContentLoaded', loadSalesData);
  </script>
</body>
</html>